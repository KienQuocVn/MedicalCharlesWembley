@model List<MedicalCharlesWembley.Models.TConfig>

@{
    ViewData["Title"] = "Admin - Header Config";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<div class="title">TConfig list (Header)</div>
<div class="search-bar">
    <div>
        <input type="text" id="searchConfigName" placeholder="ConfigName" />
        <button onclick="searchConfig()">Search</button>
    </div>
    <button onclick="window.location.href='@Url.Action("Create", "Admin")'>Insert</button>
</div>
<table>
    <thead>
        <tr>
            <th>No.</th>
            <th>Config Name</th>
            <th>Config Value</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        @if (Model != null && Model.Any())
        {
            int index = 1;
            foreach (var config in Model)
            {
                <tr>
                    <td>@index</td>
                    <td>@config.ConfigName</td>
                    <td>
                        @if (!string.IsNullOrEmpty(config.ConfigValue) && Uri.IsWellFormedUriString(config.ConfigValue, UriKind.Absolute))
                        {
                            <img src="@config.ConfigValue" alt="@config.ConfigName" style="max-width: 100px;" />
                        }
                        else
                        {
                            @config.ConfigValue
                        }
                    </td>
                    <td><span class="action-btn" onclick="editConfig('@config.ConfigID')">âœŽ</span></td>
                </tr>
                index++;
            }
        }
        else
        {
            <tr><td colspan="4">No data available</td></tr>
        }
    </tbody>
</table>

<script>
    function searchConfig() {
        const searchTerm = document.getElementById('searchConfigName').value;
        window.location.href = '@Url.Action("Header", "Admin")?searchTerm=' + encodeURIComponent(searchTerm);
    }

    function editConfig(configId) {
        window.location.href = '@Url.Action("Edit", "Admin")?id=' + configId;
    }
</script>